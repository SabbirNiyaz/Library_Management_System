<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login-Register</title>
    <link rel="stylesheet" href="formStyles.css">
</head>
<body>
    <div class="container">
        <!-- Login Form -->
        <div class="form-box" id="login-form">
            <form id="loginForm" action="" method="post" autocomplete="off" novalidate>
                <h2>ðŸ“š Library Management System</h2>
                <h3>Login</h3>
                <input type="email" name="loginEmail" id="loginEmail" placeholder="Email" required>
                <div class="error" id="loginEmailError"></div>
                <input type="password" name="loginPassword" id="loginPassword" placeholder="Password" required>
                <div class="error" id="loginPasswordError"></div>
                <button type="submit" name="login">Login</button>
                <p>Don't have an account? <a href="#" onclick="showRegisterForm()">Register</a></p>
                <div>
                    <p id="forgotPassword"><a href="#">Forgot Password?</a></p>
                </div>
            </form>
        </div>

        <!-- Register Form -->
        <div class="form-box" id="register-form" style="display: none;">
            <form id="registerForm" action="" method="post" autocomplete="off" novalidate>
                <h2>ðŸ“š Library Management System</h2>
                <h3>Register</h3>
                <input type="text" name="name" id="name" placeholder="Name" required>
                <div class="error" id="nameError"></div>
                <input type="email" name="email" id="email" placeholder="Email" required>
                <div class="error" id="emailError"></div>
                <input type="password" name="password" id="password" placeholder="Password" required>
                <div class="error" id="passwordError"></div>
                <select name="role" id="role" required>
                    <option value="">Select Role</option>
                    <option value="user">User</option>
                    <option value="librarian">Librarian</option>
                    <option value="admin">Admin</option>
                </select>
                <div class="error" id="roleError"></div>
                <button type="submit" name="register">Register</button>
                <p>Already have an account? <a href="#" onclick="showLoginForm()">Login</a></p>
            </form>
        </div>
    </div>

    <script>
    // Show/hide forms
    function showRegisterForm() {
        document.getElementById('login-form').style.display = 'none';
        document.getElementById('register-form').style.display = 'block';
    }
    function showLoginForm() {
        document.getElementById('register-form').style.display = 'none';
        document.getElementById('login-form').style.display = 'block';
    }

    // Register Form Validation
    document.getElementById('registerForm').addEventListener('submit', function(e) {
        e.preventDefault();

        // Clear previous errors
        document.getElementById('nameError').innerText = '';
        document.getElementById('emailError').innerText = '';
        document.getElementById('passwordError').innerText = '';
        document.getElementById('roleError').innerText = '';

        // Get input values
        let name = document.getElementById('name').value.trim();
        let email = document.getElementById('email').value.trim();
        let password = document.getElementById('password').value;
        let role = document.getElementById('role').value;

        let isValid = true;

        // Name validation
        if (name === "") {
            document.getElementById('nameError').innerText = 'Name cannot be empty.';
            isValid = false;
        } else if (!/^[a-zA-Z\s]{2,}$/.test(name)) {
            document.getElementById('nameError').innerText = 'Please enter a valid name (at least 2 letters, letters and spaces only).';
            isValid = false;
        }

        // Email validation
        if (email === "") {
            document.getElementById('emailError').innerText = 'Email cannot be empty.';
            isValid = false;
        } else if (!/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(email)) {
            document.getElementById('emailError').innerText = 'Please enter a valid email address.';
            isValid = false;
        }

        // Password validation
        if (password === "") {
            document.getElementById('passwordError').innerText = 'Password cannot be empty.';
            isValid = false;
        } else if (password.length < 6) {
            document.getElementById('passwordError').innerText = 'Password must be at least 6 characters long.';
            isValid = false;
        } else if (!/[A-Z]/.test(password) || !/[a-z]/.test(password) || !/[0-9]/.test(password) || !/[\W_]/.test(password)) {
            document.getElementById('passwordError').innerText = 'Password must contain uppercase, lowercase, digit, and special character.';
            isValid = false;
        }

        // Role validation
        if (role === "") {
            document.getElementById('roleError').innerText = 'Please select a role.';
            isValid = false;
        }

        if (isValid) {
            alert('Registration successful!');
            // You can submit the form (e.g., via AJAX)
            // this.submit(); // Uncomment if you want to submit normally
        }
    });

    // Login Form Validation
    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault();

        document.getElementById('loginEmailError').innerText = '';
        document.getElementById('loginPasswordError').innerText = '';

        let email = document.getElementById('loginEmail').value.trim();
        let password = document.getElementById('loginPassword').value;

        let isValid = true;

        // Email validation
        if (email === "") {
            document.getElementById('loginEmailError').innerText = 'Email cannot be empty.';
            isValid = false;
        } else if (!/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(email)) {
            document.getElementById('loginEmailError').innerText = 'Please enter a valid email address.';
            isValid = false;
        }

        // Password validation
        if (password === "") {
            document.getElementById('loginPasswordError').innerText = 'Password cannot be empty.';
            isValid = false;
        }

        if (isValid) {
            alert('Login successful!');
            // You can submit the form (e.g., via AJAX)
            // this.submit(); // Uncomment if you want to submit normally
        }
    });
    </script>
    <script src="formScripts.js"></script>
</body>
</html>